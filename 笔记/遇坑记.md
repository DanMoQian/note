# 遇坑记

## mybatis分页问题

问题

```java
public interface ArrangeMapper extends BaseMapper<Arrange> {

    List<Arrange> list1(@Param("pageNum") Integer pageNum, @Param("pageSize") Integer pageSize);
}
```

```xml
<select id="list1" resultMap="ArrangeResult">
    SELECT
    public_security_id, a.id id, start_time, end_time, watchline_id, u.username username, wl.line line
    FROM
    arrange a
    JOIN USER u ON u.user_id = a.public_security_id
    JOIN watch_line wl ON a.watchline_id = wl.id
    limit #{pageNum}, #{pageSize}
</select>
```

报错

```
Cause: java.lang.IndexOutOfBoundsException: Index: 0, Size: 0
```

解决：

```java
public interface ArrangeMapper extends BaseMapper<Arrange> {

    List<Arrange> list1(@Param("page") Integer pageNum, @Param("pageSize") Integer pageSize);
}
```

```xml
<select id="list1" resultMap="ArrangeResult">
    SELECT
    public_security_id, a.id id, start_time, end_time, watchline_id, u.username username, wl.line line
    FROM
    arrange a
    JOIN USER u ON u.user_id = a.public_security_id
    JOIN watch_line wl ON a.watchline_id = wl.id
    limit #{page}, #{pageSize}
</select>
```

> 分析：
>
> 这就很奇怪了，为什么把pageNum改为page就没问题了呢？下面纯属我的猜想，希望有哪位大佬看到此问题能指点一二。
>
> 1、因为pageNum是mybatis或者mysql的关键字，所以会报错
>
> 2、pageNum可能是mybatis的一个函数，mybatis碰到pageNum会自动执行函数